

MySQL默认的事务隔离级别是“可重复读”也就是REPEATABLE-READ。

### **事务隔离级别包括：**

| 1    | 读未提交 | READ-UNCOMMITTED |
| :--- | -------- | ---------------- |
| 2    | 读提交   | READ-COMMITTED   |
| 3    | 可重复读 | REPEATABLE-READ  |
| 4    | 串行化   | SERIALIZABLE     |

### **事务隔离级别并发问题**

|      | 事务隔离级别                  | 脏读   | 不可重复读 | 幻读   |
| ---- | ----------------------------- | ------ | ---------- | ------ |
| 1    | 读未提交 （read-uncommitted） | **是** | **是**     | **是** |
| 2    | 读提交 （read-committed）     | 否     | **是**     | **是** |
| 3    | 可重复读 （repeatable-read）  | 否     | 否         | **是** |
| 4    | 串行化 （serializable）       | 否     | 否         | 否     |

　　1、脏读：事务A读取了事务B更新的数据，然后B回滚操作，那么A读取到的数据是脏数据

​		2、不可重复读：事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。

　　3、幻读：系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。

　　**小结：不可重复读的和幻读很容易混淆，不可重复读侧重于*修改*，幻读侧重于*新增或删除*。解决不可重复读的问题只需*锁住满足条件的行*，解决幻读需要*锁表***



### **查看事物的隔离级别方法**

1. show variables like 'transaction_isolation';

2. MySQL8.0+：

   1.查看当前会话隔离级别

   ​	select @@transaction_isolation;

   2.查看系统当前隔离级别

   select @@global.transaction_isolation;

    MySQL5.0+：

   1.查看当前会话隔离级别

   ​	select @@tx_isolation;

   2.查看系统当前隔离级别

   ​	select @@global.tx_isolation;

### **设置隔离级别**

​	1.设置当前会话隔离级别

​		set session transaction isolatin level repeatable read;

​	2.设置系统当前隔离级别

​		set global transaction isolation level repeatable read;

​	3.my.cnf 配置

```sql
[mysqld]
transaction-isolation=READ-COMMITTED
```